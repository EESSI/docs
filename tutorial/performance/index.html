
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://eessi.github.io/docs/tutorial/performance/">
      
      
      
      
      <link rel="icon" href="../../img/logos/EESSI.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Performance - European Environment for Scientific Software Installations (EESSI)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    
      <link rel="stylesheet" href="../../available_software/css/style_table.css">
    
      <link rel="stylesheet" href="https://cdn.datatables.net/2.2.2/css/dataTables.semanticui.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#performance-aspects-of-cernvm-fs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="European Environment for Scientific Software Installations (EESSI)" class="md-header__button md-logo" aria-label="European Environment for Scientific Software Installations (EESSI)" data-md-component="logo">
      
  <img src="../../img/logos/EESSI.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            European Environment for Scientific Software Installations (EESSI)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Performance
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/EESSI" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    EESSI @ GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="European Environment for Scientific Software Installations (EESSI)" class="md-nav__button md-logo" aria-label="European Environment for Scientific Software Installations (EESSI)" data-md-component="logo">
      
  <img src="../../img/logos/EESSI.png" alt="logo">

    </a>
    European Environment for Scientific Software Installations (EESSI)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EESSI" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    EESSI @ GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Design
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filesystem_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filesystem layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compatibility_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compatibility layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_layer/cpu_targets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supported CPU targets
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Available software and repositories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Available software and repositories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../available_software/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Repositories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Repositories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../repositories/software.eessi.io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Production
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../repositories/riscv.eessi.io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RISC-V
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../repositories/pilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pilot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../repositories/dev.eessi.io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development repository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Installation and configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Installation and configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_access/is_eessi_accessible/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Is EESSI already installed?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_access/native_installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Native
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_access/eessi_container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Container
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Windows and macOS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Windows and macOS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_access/eessi_wsl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Windows with WSL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_access/eessi_limactl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    macOS with Lima
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Configuring EESSI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Configuring EESSI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../site_specific_config/host_injections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to configure EESSI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../site_specific_config/gpu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GPU support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../site_specific_config/lmod_hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom LMOD hooks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Basic usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Basic usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_eessi/setting_up_environment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Set up environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_eessi/basic_commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_eessi/eessi_demos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Demos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_eessi/eessi_in_ci/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EESSI in CI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Advanced usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filesystem_layer/stratum1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setting up your Stratum
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_eessi/building_on_eessi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building software with EESSI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Test suite
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Test suite
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../test-suite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../test-suite/installation-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation & configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../test-suite/ReFrame-configuration-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ReFrame configuration file
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../test-suite/usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../test-suite/available-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Available tests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../test-suite/writing-portable-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Writing tests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../test-suite/release-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release notes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Known issues and workarounds
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            Known issues and workarounds
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../known_issues/eessi-2023.06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    v2023.06
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Adding software to EESSI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Adding software to EESSI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding_software/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    For contributors
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            For contributors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding_software/contribution_policy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contribution policy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding_software/opening_pr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open PR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding_software/debugging_failed_builds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debugging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding_software/adding_development_software/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development repository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    For maintainers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            For maintainers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BTD bot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding_software/building_software/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building software
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding_software/deploying_software/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploying software
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_layer/build_nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build nodes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Community and support
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Community and support
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meetings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Meetings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Talks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact info
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../training/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Training
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../systems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Systems where EESSI is available
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Governance
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#start-up-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Start-up performance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#status-of-relevant-caches" class="md-nav__link">
    <span class="md-ellipsis">
      Status of relevant caches
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Status of relevant caches">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cold_cache" class="md-nav__link">
    <span class="md-ellipsis">
      Cold cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hot_cache" class="md-nav__link">
    <span class="md-ellipsis">
      Hot cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#warm_cache" class="md-nav__link">
    <span class="md-ellipsis">
      Warm cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-world-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Real-world scenario
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tensorflow-start-up-performance" class="md-nav__link">
    <span class="md-ellipsis">
      TensorFlow start-up performance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TensorFlow start-up performance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-filesystems" class="md-nav__link">
    <span class="md-ellipsis">
      Local filesystems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-file-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Parallel file systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parallel file systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nfs" class="md-nav__link">
    <span class="md-ellipsis">
      NFS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lustre" class="md-nav__link">
    <span class="md-ellipsis">
      Lustre
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpfs" class="md-nav__link">
    <span class="md-ellipsis">
      GPFS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cernvm-fs" class="md-nav__link">
    <span class="md-ellipsis">
      CernVM-FS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CernVM-FS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cold-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Cold cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hot-warm-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Hot + warm cache
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-performance-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Additional performance metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-configuration-details" class="md-nav__link">
    <span class="md-ellipsis">
      Test configuration details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Test configuration details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client-system" class="md-nav__link">
    <span class="md-ellipsis">
      Client system
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software-stack" class="md-nav__link">
    <span class="md-ellipsis">
      Software stack
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test_workload_details" class="md-nav__link">
    <span class="md-ellipsis">
      Test workload details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Test workload details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tensorflow_details" class="md-nav__link">
    <span class="md-ellipsis">
      TensorFlow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TensorFlow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-files" class="md-nav__link">
    <span class="md-ellipsis">
      Required files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#experimental_setup" class="md-nav__link">
    <span class="md-ellipsis">
      Experimental setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Experimental setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system_configurations" class="md-nav__link">
    <span class="md-ellipsis">
      System configurations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relevant-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Relevant commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<div class="admonition danger">
<p class="admonition-title">Work in progress</p>
<p><em>(30 April 2025)</em></p>
<p>The contents of this tutorial are currently being reworked to be up-to-date with recent developments in CernVM-FS,
and to be well integrated in the EESSI documentation.</p>
<p>It is based on the <em>"Best Practices for CernVM-FS in HPC"</em> tutorial that was held on
4 Dec 2023, see also https://multixscale.github.io/cvmfs-tutorial-hpc-best-practices.</p>
</div>
<h1 id="performance-aspects-of-cernvm-fs">Performance aspects of CernVM-FS<a class="headerlink" href="#performance-aspects-of-cernvm-fs" title="Permanent link">&para;</a></h1>
<p>One aspect we can not ignore in the context of software on HPC infrastructure is <em>performance</em> (the P in HPC).</p>
<h2 id="start-up-performance">Start-up performance<a class="headerlink" href="#start-up-performance" title="Permanent link">&para;</a></h2>
<p>When installations of scientific software applications are provided via a CernVM-FS repository,
the main performance metric to worry about is <strong>start-up time</strong>: the amount of time it takes until an
application can <em>start</em> running. This requires that not only the binary program that is being launched itself
is somehow available on the system (on disk, in memory, etc.), but also that all files required by it
(libraries, dependencies) are available, including the ones they require in turn, etc.</p>
<p>Parallel filesystems like <a href="https://en.wikipedia.org/wiki/GPFS">GPFS (now IBM Storage Scale)</a> and
<a href="https://www.lustre.org">Lustre</a>, which are ubiquitous on HPC systems,
are notorious for not performing well in this respect, which is not surprising since they mainly target a very
different use case: large-scale high-performance I/O on large datasets.</p>
<p>This has led to all sorts of creative workarounds for "the startup problem",
including for example tools like <a href="https://github.com/hpc/Spindle">Spindle</a>, and recommendations to not install
(in particular Python) software directly on the parallel filesystem but to use a container image instead
(<a href="https://docs.lumi-supercomputer.eu/software/installing/python/">see the documentation of the current flagship EuroHPC system LUMI</a>).</p>
<div class="admonition example">
<p class="admonition-title">A note on the presented performance results</p>
<p>The start-up timing results shown in this section are by no means meant to be a statistically
rigorous study of software start-up time.</p>
<p>That said, these results should be indicative of what you may see on production HPC systems,
and give a good view on the start-up times that you will observe for software provided via CernVM-FS,
relative to alternatives like GPFS, Lustre, NFS, local disk, etc.</p>
<p>More details on the experimental setup are available <a href="#experimental_setup">at the end of this section</a>.</p>
</div>
<h2 id="status-of-relevant-caches">Status of relevant caches<a class="headerlink" href="#status-of-relevant-caches" title="Permanent link">&para;</a></h2>
<p>The status of the Linux kernel file system cache, the GPFS caching mechanisms (page pool, stat cache, etc.),
and the CernVM-FS client cache are key factors in start-up performance (when they are relevant to the
file system being accessed).</p>
<p>We discriminate between 3 scenarios: <a href="#cold_cache">cold cache</a>, <a href="#hot_cache">hot cache</a>, and <a href="#warm_cache">warm cache</a>.</p>
<h3 id="cold_cache">Cold cache<a class="headerlink" href="#cold_cache" title="Permanent link">&para;</a></h3>
<p>We use the term "<strong>cold cache</strong>" when <em>none</em> of files required for starting a particular software application
are available in <em>any</em> of the relevant client-side caches.</p>
<p>This is the <em>worst-case scenario</em>, since the necessary files have to be obtained elsewhere first,
which could be from local disk, or from a remote server (either in the local network, or remotely),
which may heavily impact start-up time.</p>
<p>To ensure that the caches on the client system are cold, we actively clear all caches
each time before we evaluate each start-up performance.</p>
<h3 id="hot_cache">Hot cache<a class="headerlink" href="#hot_cache" title="Permanent link">&para;</a></h3>
<p>When all files required for running a particular software application are already cached <em>in memory</em>
on the client system (in the kernel file system cache, or in the GPFS caches), we have a "<strong>hot cache</strong>" situation.</p>
<p>This is the <em>best possible scenario</em>, which is typically the case when the software application has been used
recently on that client system.</p>
<p>To ensure that the caches on the client system are hot, we first do a couple of warmup runs before
we start evaluating start-up performance.</p>
<h3 id="warm_cache">Warm cache<a class="headerlink" href="#warm_cache" title="Permanent link">&para;</a></h3>
<p>Finally, we also consider a "<strong>warm cache</strong>" situation, in particular when evaluating start-up time
for software provided via CernVM-FS. In this situation, all necessary files are available in the
CernVM-FS client cache (which is typically on the local disk of the client),
but not yet in the in-memory kernel file system cache. As a result, there will be an impact on
start-up performance, since the files have to be loaded from (local) disk first.</p>
<p>This is a fairly likely scenario, especially if the CernVM-FS client cache is sufficiently large
to cover typical workloads being run &ndash; whether that's feasible or not depends a lot on the workload mix.</p>
<p>To evaluate start-up performance in this scenario, we:</p>
<ol>
<li>First do a couple of warmup runs to populate the CernVM-FS client cache;</li>
<li>Clear the kernel file system cache;</li>
<li>Evaluate the start-up performance <em>once</em>;</li>
</ol>
<p>Steps 2 and 3 are then repeated to get multiple performance results in the same scenario.</p>
<h3 id="real-world-scenario">Real-world scenario<a class="headerlink" href="#real-world-scenario" title="Permanent link">&para;</a></h3>
<p>In a production setup of an HPC cluster, where typically multiple thousands of jobs are being run every day,
the <strong>actual situation will usually be a mix of these 3 idealistic scenarios</strong>,
since some files may have been accessed
very recently (for example common libraries from the
<a href="../eessi/high-level-design/#compat_layer">EESSI compatibility layer</a>, or common dependencies from
the <a href="../eessi/high-level-design/#software_layer">EESSI software layer</a>),
while others may only be in the CernVM-FS client cache, or not cached yet at all (or may have been evicted from
the cache due to space constraints).</p>
<h2 id="tensorflow-start-up-performance">TensorFlow start-up performance<a class="headerlink" href="#tensorflow-start-up-performance" title="Permanent link">&para;</a></h2>
<p>We have evaluated the start-up performance of <a href="https://www.tensorflow.org">TensorFlow</a>
across a wide range of system configurations, by timing how long it takes to run the following command:</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>python<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;import tensorflow&#39;</span>
</code></pre></div>
<p>Although this is a trivial single-core workload, it yields some interesting insights
into start-up performance for software provided via CernVM-FS and alternatives.</p>
<p>More details on this workload, in particular an overview of how many files are required to run it,
are available in the <a href="#tensorflow_details"><em>Test workload details</em> section</a>.</p>
<h3 id="local-filesystems">Local filesystems<a class="headerlink" href="#local-filesystems" title="Permanent link">&para;</a></h3>
<p>To set the stage, we first evaluate start-up performance using only local filesystems on the client:
local disk (SSD, <code>ext4</code>, <code>/tmp</code>) and RAM disk (DDR4 RAM memory, <code>/dev/shm</code>).</p>
<p>Using RAM disk for <em>all</em> software installations is not exactly a realistic scenario on an HPC cluster,
because of the wide variety of software applications and libraries that are typically employed,
and the total amount of storage space that is required to host the necessary software installations.
Nevertheless, it is worth evaluating start-up performance with a setup like this, if only to have
a clear view on what the best possible start-up time is that we can achieve.</p>
<p>Using local disk to provide a large central software stack that caters to the needs of the diverse set of
end users is unlikely to be feasible either. In addition, this approach implies a significant maintenance burden
since the provided software installations must be <em>identical</em> across all client systems at all times,
and typically requires limiting both what is centrally provided and how long software versions
remain available.
There are HPC sites that do take this approach however, one notable example being <a href="https://www.tacc.utexas.edu">TACC</a>,
who provide an overview of their central software stack <a href="https://tacc.utexas.edu/use-tacc/software-list">here</a>.</p>
<p align="center">
<img src="../img/perf/tensorflow-startup-local-fs-cold-vs-hot.png" alt="Start-up performance of TensorFlow: local disk vs RAM disk" width="100%"/></br>
</p>

<p>These first results show that starting TensorFlow takes ~2.0 seconds when the necessary files can be served
directly from RAM disk, and ~2.1 seconds from the kernel file system cache (<a href="#hot_cache">hot cache</a>).</p>
<p>With a <a href="#cold_cache">cold cache</a> and using software installations located on a local SSD disk,
the start-up time of TensorFlow roughly doubles to ~4.3 seconds.</p>
<p>These times will be our reference points going forward.</p>
<h3 id="parallel-file-systems">Parallel file systems<a class="headerlink" href="#parallel-file-systems" title="Permanent link">&para;</a></h3>
<p>Central software stacks on HPC systems are typically provided via some kind of <em>distributed</em> parallel file system,
since that significantly reduces the maintenance burden (automatic synchronisation across client systems),
and effectively removes the size limitation aspect since these parallel file systems typically have
tens to thousands (or more) of TBs of available disk space.</p>
<h4 id="nfs">NFS<a class="headerlink" href="#nfs" title="Permanent link">&para;</a></h4>
<p>Let's start with a traditional and fairly standard approach, which is to make a central software stack
available via an export of a centrally managed shared file system using <a href="https://en.wikipedia.org/wiki/Network_File_System">NFS</a>.
In this particular case we evaluated TensorFlow start-up time on a worker node of the HPC-UGent Tier-2 cluster
<em>victini</em>, which uses <a href="https://nfs-ganesha.github.io">NFS-Ganesha</a>.</p>
<p align="center">
<img src="../img/perf/tensorflow-startup-nfs.png" alt="Start-up performance of TensorFlow: NFS" width="70%"/></br>
</p>

<p>Here we already observe a significant, yet still somewhat limited, increase in start-up time.</p>
<p>With a <a href="#cold_cache">cold cache</a>, ~6.4 seconds are required to start TensorFlow, and there is notably
larger variation in the start-up times; neither of these observations is a surprise with NFS.</p>
<p>The start-up time with a <a href="#hot_cache">hot cache</a> is also significantly higher compared to using local
filesystems at ~3.8 seconds, but since this is an older
generation system we can not directly compare these times to the ones observed for local disk and RAM disk
earlier. There is a significant penalty involved though when using NFS, since on the same system we observed start-up times
of ~2.5 seconds when using RAM disk, as well as with a hot kernel file system cache.</p>
<p>While these start-up times are still quite OK, it is worth noting that NFS is notorious for not scaling well when it needs
to serve many different client systems, which is not apparent in these results since only a single client system
was used.</p>
<h4 id="lustre">Lustre<a class="headerlink" href="#lustre" title="Permanent link">&para;</a></h4>
<p><a href="https://www.lustre.org">Lustre</a> is a popular open-source distributed parallel file system that is used on many large-scale HPC clusters,
including <a href="https://docs.vscentrum.be/gent/tier1_hortense.html">VSC Tier-1 Hortense</a> and flagship EuroHPC pre-exascale system <a href="https://docs.lumi-supercomputer.eu">LUMI</a>.</p>
<p>It is often also the <em>only</em> shared file system that is available on these systems,
and hence is the most obvious choice to make software installations available to the cluster worker nodes.</p>
<p align="center">
<img src="../img/perf/tensorflow-startup-lustre.png" alt="Start-up performance of TensorFlow: Lustre" width="100%"/></br>
</p>

<p>We considered two different ways of accessing the Lustre file system of VSC Tier-1 Hortense
(<a href="#system_configurations">see below</a> for more details) on which TensorFlow was installed:</p>
<ul>
<li>directly, via a read-write mount point;</li>
<li>indirectly, via a read-only mount point (<a href="https://docs.vscentrum.be/gent/tier1_hortense.html#accessing-software-via-readonly-mount-point">which is recommended on Hortense</a>);</li>
</ul>
<p>In both cases, the start-up times were quite similar, with a dramatic increase to ~75 seconds
in the <a href="#cold_cache">cold cache</a> situation, and a very reasonable ~2.8-2.9 seconds with a <a href="#hot_cache">hot cache</a>.</p>
<p>The start-up time of well over 1 minute for TensorFlow with a cold cache is a clear sign that (this particular version and configuration of)
Lustre is not well suited for serving software installations.
This is a well-known problem, see for example the "<em>Avoid Accessing Executables on Lustre Filesystems</em>" recommendation that is included in the <a href="https://www.nas.nasa.gov/hecc/support/kb/lustre-best-practices_226.html"><em>Lustre Best Practices</em> documentation</a> published by the HECC group at NASA for their <em>Pleiades</em> system, and the <a href="https://docs.lumi-supercomputer.eu/software/installing/python/">recommendation for LUMI to not install Python
software directly on the Lustre file system</a>.</p>
<h4 id="gpfs">GPFS<a class="headerlink" href="#gpfs" title="Permanent link">&para;</a></h4>
<p>Another very popular (commercial) distributed parallel file system is IBM Storage Scale,
formerly known as IBM Spectrum Scale, and commonly referred to by its original name <a href="https://en.wikipedia.org/wiki/GPFS">GPFS</a>.</p>
<p>We evaluated the start-up performance of TensorFlow on the 4 different GPFS file systems that are available
in the HPC-UGent Tier-2 infrastructure (see <a href="#system_configurations">here</a> for more information):</p>
<ul>
<li><code>apps</code>, which provides the central software stack (along with home directories);</li>
<li><code>data</code>, which is intended for long-term storage of large volumes of data;</li>
<li><code>scratch</code>, which is recommended for live input/output of jobs;</li>
<li><code>scratch (SSD)</code>, an additional smaller scratch file system backed by SSDs, which is recommended for I/O-intensive workloads;</li>
</ul>
<p align="center">
<img src="../img/perf/tensorflow-startup-gpfs.png" alt="Start-up performance of TensorFlow: GPFS" width="100%"/></br>
</p>

<p><a href="#cold_cache">Cold cache</a> start-up times for TensorFlow ranging from ~35 to ~48 seconds are observed for the <code>apps</code>, <code>data</code>, and <code>scratch</code>
file systems, with only the <code>scratch (SSD)</code> file system exhibiting somewhat reasonable cold start-up times of ~5.9 seconds.</p>
<p>While there is a clear decrease in start-up times when the various GPFS caching mechanisms (page pool, stat cache, file
cache) are hot,
the situation is still quite dramatic with ~27 to ~33 seconds being needed to start TensorFlow,
except for <code>scratch (SSD)</code> where it takes ~5.1 seconds. This implies that the GPFS caching mechanism
is not that effective, and that we are still being exposed a lot to the file system latency.</p>
<p>The main reason for this is that the GPFS "stat cache", which is a client-side caching mechanism for <code>stat</code> system calls
that is common across all GPFS files systems available on that client, is set to only have 1,000 entries
in the HPC-UGent Tier-2 setup (which is the default for the <code>maxStatCache</code> configuration setting in GPFS). While this could obviously be
tuned to improve start-up performance of software, this should not be done on a hunch since it may adversely
affect the overall stability of the GPFS storage servers.</p>
<h4 id="cernvm-fs">CernVM-FS<a class="headerlink" href="#cernvm-fs" title="Permanent link">&para;</a></h4>
<p>Now that we have an extensive set of reference start-up times, we can evaluate the start-up performance
when using a TensorFlow installation that is provided via CernVM-FS.</p>
<p>Along with a worker node in the HPC-UGent Tier-2 cluster <em>doduo</em> (located in Ghent, Belgium) as client system,
we consider the following configurations:</p>
<ul>
<li>a private <a href="../appendix/terminology/#proxy">proxy server</a> that is accessible from the client system via a high-speed network;</li>
<li>a private <a href="../appendix/terminology/#stratum1">Stratum 1</a> server that is available in the local network via Gbit
  Ethernet;</li>
<li>the public Stratum 1 server for <a href="../eessi/">EESSI</a> in <a href="https://aws.amazon.com/">AWS</a> availability zone <code>eu-central-1a</code>;</li>
<li>the public Stratum 1 server for <a href="../eessi/">EESSI</a> in <a href="https://azure.microsoft.com/en-us">Azure</a> location <code>East US (Zone 1)</code>;</li>
</ul>
<p>More technical details on network connectivity to these servers are available <a href="#system_configurations">below</a>.</p>
<p>CernVM-FS was explicitly configured to only use one of these servers, via the <code>CVMFS_SERVER_URL</code> and/or
<code>CVMFS_HTTP_PROXY</code> <a href="https://cvmfs.readthedocs.io/en/stable/apx-parameters.html#client-parameters">client configuration
settings</a>.</p>
<h5 id="cold-cache">Cold cache<a class="headerlink" href="#cold-cache" title="Permanent link">&para;</a></h5>
<p>Let's start with the worst-case <a href="#cold_cache">cold cache</a> scenario, in which CernVM-FS needs to
download all necessary files to the client system from a (local or remote) server before TensorFlow can be started.</p>
<p align="center">
<img src="../img/perf/tensorflow-startup-cvmfs-cold.png" alt="Start-up performance of TensorFlow: CernVM-FS (cold
caches)" width="90%"/></br>
</p>

<p>We observe very reasonable cold start-up times when using an in-network private proxy server (~8.6 seconds)
or private Stratum 1 replica server (~11.0 seconds), significantly better than what we observed for GPFS
and Lustre (both of which are accessible from cluster worker nodes via a dedicated high-speed network).</p>
<p>When CernVM-FS needs to download the necessary files from a remote public Stratum 1 server we of course
observe dramatically longer start-up times, from ~62 seconds when using the relatively close one (within Europe), to
about 6 <em>minutes</em> when having to go across the Atlantic.</p>
<p>This highlights the need for a private proxy or Stratum 1 replica server for a production-quality CernVM-FS setup.</p>
<h5 id="hot-warm-cache">Hot + warm cache<a class="headerlink" href="#hot-warm-cache" title="Permanent link">&para;</a></h5>
<p>In the <a href="#hot_cache">hot cache</a> and <a href="#warm_cache">warm cache</a> scenarios, in which all necessary files are
already available locally on the client system either in-memory or on the local disk,
we observe much better start-up times, as expected:</p>
<p align="center">
<img src="../img/perf/tensorflow-startup-cvmfs-hot-warm.png" alt="Start-up performance of TensorFlow: CernVM-FS (hot + warm cache)" width="100%"/></br>
</p>

<p>With a hot kernel file system cache, we see an average start-up time for TensorFlow of ~2.25 seconds,
which suggests there is a ~7% overhead introduced by CernVM-FS. Note that this is still significantly
better than what we observed for <a href="#nfs">NFS</a>, <a href="#lustre">Lustre</a>, and <a href="#gpfs">GPFS</a>.</p>
<p>In the <a href="#warm_cache">warm cache</a> scenarios where CernVM-FS serves all required files from its client cache
on a local SSD disk we see start-up times that are on average ~3.9-4.3 seconds, depending on the network
latency to the remote server used in the CernVM-FS client configuration (and interestingly,
with a larger variance when using a local proxy or Stratum 1, which may be because of other activity
on the local cluster network). We did not try to optimize these warm start-up
times by changing the CernVM-FS configuration settings, but some options are already supported by CernVM-FS
that could reduce the impact of network latency considerably.</p>
<p>When using a RAM disk as location for the CernVM-FS client cache in combination with a private proxy server,
the start-up time in the <a href="#warm_cache">warm cache</a> scenario was reduced to ~2.56 seconds,
and a lot less variation was observed (although that could be coincidental).</p>
<h2 id="additional-performance-metrics">Additional performance metrics<a class="headerlink" href="#additional-performance-metrics" title="Permanent link">&para;</a></h2>
<p>Next to software start-up time on a single client system, additional performance metrics should
be evaluated as well, including:</p>
<ul>
<li>The <strong>scalability</strong> of a CernVM-FS setup when lots of worker nodes of an HPC cluster use software
  provided via CernVM-FS, in particular when running (large-scale) MPI applications;</li>
<li>The impact of having the CernVM-FS "service" running on the client systems, in particular to what extent
  it increases <a href="https://ieeexplore.ieee.org/document/6721592"><strong>OS jitter</strong></a> which can impact performance of workloads;</li>
</ul>
<p>A more extensive performance study that covers these aspects as well is out of scope for this tutorial.</p>
<hr />
<h2 id="test-configuration-details">Test configuration details<a class="headerlink" href="#test-configuration-details" title="Permanent link">&para;</a></h2>
<p>A multitude of different system configurations is considered to evaluate start-up performance
of the <a href="#test_workload_details">test workloads</a>.</p>
<h3 id="client-system">Client system<a class="headerlink" href="#client-system" title="Permanent link">&para;</a></h3>
<p>The client system used in the tests is a worker node of the HPC-UGent Tier-2 cluster "doduo", with two exceptions:</p>
<ul>
<li>When testing NFS, the HPC-UGent Tier-2 cluster "victini" was used instead;</li>
<li>When testing Lustre, the VSC Tier-1 cluster "Hortense" was used instead;</li>
</ul>
<p><em>(see <a href="#system_configurations">System configurations</a> below for more technical details)</em></p>
<h3 id="software-stack">Software stack<a class="headerlink" href="#software-stack" title="Permanent link">&para;</a></h3>
<p>Software installations being used are available via either:</p>
<ul>
<li>a GPFS filesystem, directly attached to the cluster via a high-speed network;</li>
<li>a Lustre filesystem, directly attached to the cluster via a high-speed network;</li>
<li>an NFS mount of a GPFS filesystem, via a 10Gbit Ethernet connection;</li>
<li>individual CernVM-FS setups:<ul>
<li>with a client cache on local disk (SSD, <code>ext4</code>), or in RAM disk (<code>/dev/shm</code>);</li>
<li>without and with (only) a (private) proxy server in the local network;</li>
<li>without and with (only) a private Stratum 1 replica server in the network;</li>
<li>with (only) a <em>specific</em> public Stratum 1 replica server: one in AWS <code>eu-west</code> region,
  another in Azure <code>us-east</code> region;</li>
</ul>
</li>
</ul>
<p><em>(see <a href="#system_configurations">System configurations</a> below for more technical details)</em></p>
<h2 id="test_workload_details">Test workload details<a class="headerlink" href="#test_workload_details" title="Permanent link">&para;</a></h2>
<h3 id="tensorflow_details">TensorFlow<a class="headerlink" href="#tensorflow_details" title="Permanent link">&para;</a></h3>
<p>We evaluate the start-up performance of <a href="https://www.tensorflow.org">TensorFlow</a>,
which is considered to be a representative example of a scientific workload implemented in
<a href="https://www.python.org/">Python</a>, which is a tremendously popular programming language in scientific research.
We used TensorFlow version 2.13.0, installed with <a href="https://easybuild.io">EasyBuild</a> v4.8.2,
on top of Python version 3.11.3, which is available in <a href="../eessi/">EESSI</a>.</p>
<p>Before starting TensorFlow we first load the module to update the environment such
that TensorFlow is available:</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>module<span class="w"> </span>load<span class="w"> </span>TensorFlow/2.13.0-foss-2023a
</code></pre></div>
<p>To evaluate the start-up performance of TensorFlow, we simply run:</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>python<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;import tensorflow&#39;</span>
</code></pre></div>
<p>Timing information is collected using the GNU <code>time</code> command, as follows:</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>/usr/bin/time<span class="w"> </span>--format<span class="w"> </span><span class="s1">&#39;%e&#39;</span><span class="w"> </span>python<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;import tensorflow&#39;</span>
</code></pre></div>
<h4 id="required-files">Required files<a class="headerlink" href="#required-files" title="Permanent link">&para;</a></h4>
<p>Based on the statistics for and the contents of the CernVM-FS client cache after running the specified command
on an <code>x86_64</code> client system (see the details on the HPC-UGent Tier-2 cluster <em>doduo</em> <a href="#system_configurations">below</a>),
starting from a cold CernVM-FS client cache, we know that importing the <code>tensorflow</code> Python package:</p>
<ul>
<li>triggers ~3,680 <code>open()</code> calls + ~510 <code>opendir</code> calls (which includes non-existing paths);</li>
<li>requires ~3,470 files, including:<ul>
<li>~2,200 files from the TensorFlow installation itself (~94% <code>*.pyc</code> files);</li>
<li>~950 files from Python packages outside of the TensorFlow installation directory,
   of which are ~82% <code>*.pyc</code> files and ~12% shared libraries (<code>.so</code>);</li>
<li>17 files from the <a href="../eessi/high-level-design/#compat_layer">EESSI compatibility layer</a>;</li>
</ul>
</li>
<li>pulls in about ~1.1GB of data in total;</li>
</ul>
<p>As such, this is a challenge for parallel filesystems like GPFS and Lustre, as the performance results clearly show.</p>
<h2 id="experimental_setup">Experimental setup<a class="headerlink" href="#experimental_setup" title="Permanent link">&para;</a></h2>
<h3 id="system_configurations">System configurations<a class="headerlink" href="#system_configurations" title="Permanent link">&para;</a></h3>
<details class="note">
<summary>HPC-UGent Tier-2 cluster 'doduo'</summary>
<p>Hardware:</p>
<ul>
<li>Dual-socket AMD EPYC 7552 CPU (AMD Rome, 96 cores in total)</li>
<li>256GB of DDR4 RAM memory</li>
<li>240GB SSD local disk (<code>ext4</code>)</li>
<li>HDR-100 InfiniBand interconnect</li>
</ul>
<p>Operating system:</p>
<ul>
<li>Red Hat Enterprise Linux 8.8</li>
<li>Linux kernel <code>4.18.0-477.27.1.el8_8.x86_64</code></li>
<li><a href="https://en.wikipedia.org/wiki/GPFS">GPFS (now IBM Storage Scale)</a> version 5.1.8-2 (<code>pagepool=4G</code>, <code>maxStatCache=1000</code>, <code>maxFilesToCache=4000</code>)</li>
<li>CermVM-FS 2.11.2</li>
</ul>
<p><em>(see also <a href="https://www.ugent.be/hpc/en/infrastructure">HPC-UGent Tier-2 infrastructure overview</a>)</em></p>
</details>
<details class="note">
<summary>HPC-UGent Tier-2 cluster 'victini'</summary>
<p>Hardware:</p>
<ul>
<li>Dual-socket AMD EPYC 7552 CPU (AMD Rome, 96 cores in total)</li>
<li>256GB of DDR4 RAM memory</li>
<li>240GB SSD local disk (<code>ext4</code>)</li>
<li>10Gbit Ethernet interconnect</li>
</ul>
<p>Operating system:</p>
<ul>
<li>Red Hat Enterprise Linux 8.8</li>
<li>Linux kernel <code>4.18.0-477.27.1.el8_8.x86_64</code></li>
<li><a href="https://nfs-ganesha.github.io">NFS-Ganesha</a> 3.5</li>
<li>CermVM-FS 2.11.2</li>
</ul>
<p><em>(see also <a href="https://www.ugent.be/hpc/en/infrastructure">HPC-UGent Tier-2 infrastructure overview</a>)</em></p>
</details>
<details class="note">
<summary>VSC Tier-1 cluster 'Hortense'</summary>
<p>Hardware:</p>
<ul>
<li>Dual-socket Intel Xeon Gold 6140 (CPU Skylake, 36 cores in total)</li>
<li>96GB of DDR4 RAM memory</li>
<li>900GB SAS HDD local disk (<code>ext4</code>)</li>
<li>HDR-100 InfiniBand interconnect</li>
</ul>
<p>Operating system:</p>
<ul>
<li>Red Hat Enterprise Linux 8.8</li>
<li>Linux kernel <code>4.18.0-477.27.1.el8_8.x86_64</code></li>
<li><a href="https://www.lustre.org">Lustre</a> 2.12.9</li>
<li>CermVM-FS 2.11.2 (with client cache of 4GB on SSD local disk)</li>
</ul>
<p><em>(see also <a href="https://docs.vscentrum.be/gent/tier1_hortense.html#hardware-details">VSC documentation page on Hortense</a>)</em></p>
</details>
<details class="note">
<summary>Network details</summary>
<p><strong>Bandwidth</strong></p>
<p>Network bandwidth to HPC-UGent Tier-2 <code>doduo</code> cluster worker node from relevant servers,
as measured with <a href="https://software.es.net/iperf/"><code>iperf3</code> v3.15</a>:</p>
<ul>
<li>private Squid proxy server in HPC-UGent network: ~22,500 Mbits/sec</li>
<li>private Stratum 1 replica server in HPC-UGent network: ~940 Mbits/sec</li>
<li>EESSI Stratum 1 replica server in AWS <code>eu-west</code> region: ~930 Mbits/sec</li>
<li>EESSI Stratum 1 replica server in Azure <code>us-east</code> region: ~280 Mbits/sec</li>
</ul>
<p>Server-side <code>iperf3</code> command: <code>iperf3 -V -s -p 80</code>
Client-side <code>iperf3</code> command: <code>iperf3 -V -c SERVER_HOSTNAME_OR_IP -p 80 -f m</code></p>
<p><strong>Latency</strong></p>
<p>Network latency between HPC-UGent Tier-2 <code>doduo</code> cluster worker node and relevant servers,
as measured with <a href="https://linux.die.net/man/1/tcptraceroute"><code>tcptraceroute</code> v2.1.0-6</a>:</p>
<ul>
<li>private Squid proxy server in HPC-UGent network: ~0.2 ms</li>
<li>private Stratum 1 replica server in HPC-UGent network: ~0.7 ms</li>
<li>EESSI Stratum 1 replica server in AWS <code>eu-west</code> region: ~14 ms</li>
<li>EESSI Stratum 1 replica server in Azure <code>us-east</code> region: ~84 ms</li>
</ul>
</details>
<h3 id="relevant-commands">Relevant commands<a class="headerlink" href="#relevant-commands" title="Permanent link">&para;</a></h3>
<details class="note">
<summary>Kernel file system cache</summary>
<p>To clear kernel file system cache:</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>sudo<span class="w"> </span>sysctl<span class="w"> </span>-w<span class="w"> </span>vm.drop_caches<span class="o">=</span><span class="m">3</span>
</code></pre></div>
<p>To check file system cache usage:</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>vmstat<span class="w"> </span>-s<span class="w"> </span>-S<span class="w"> </span>M<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>buffer
</code></pre></div>
</details>
<details class="note">
<summary>CernVM-FS client cache</summary>
<p>To clear the CernVM-FS client cache:</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>sudo<span class="w"> </span>cvmfs_config<span class="w"> </span>wipecache
</code></pre></div>
<p>To check size of CernVM-FS client cache on disk (path determined by <code>CVMFS_CACHE_BASE</code> configuration setting):</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>sudo<span class="w"> </span>du<span class="w"> </span>-sh<span class="w"> </span>/var/lib/cvmfs
</code></pre></div>
<p>To check CernVM-FS client cache usage:</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>cvmfs_config<span class="w"> </span>stat<span class="w"> </span>-v
</code></pre></div>
<p>To check CernVM-FS client cache usage for a particular repository:</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>cvmfs_config<span class="w"> </span>stat<span class="w"> </span>-v<span class="w"> </span>software.eessi.io
</code></pre></div>
<p>To check which files are included in the CernVM-FS client cache, use:</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>sudo<span class="w"> </span>cvmfs_talk<span class="w"> </span>-i<span class="w"> </span>software.eessi.io<span class="w"> </span>cache<span class="w"> </span>list
</code></pre></div>
</details>
<details class="note">
<summary>GPFS caching mechanisms</summary>
<p>To clear all caches used by GPFS (page pool, stat cache, files cache, etc.),
we simply shut down GPFS on the client system, and restart it:</p>
<div class="copy highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>mmshutdown
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>mmstartup
</code></pre></div>
<p><strong>This should only be done on an idle system</strong>, since this will trigger an unmount of <em>all</em> GPFS file systems
on that client.</p>
</details>
<hr />
<p><em>(next: <a href="../containers/">Containers and CernVM-FS</a>)</em></p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="April 30, 2025 15:42:10">April 30, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/eessi_hpc" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["instant", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs" type="module"></script>
      
        <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
      
        <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
      
        <script src="../../available_software/javascripts/populate_overview.js"></script>
      
        <script src="https://cdn.datatables.net/plug-ins/2.2.2/pagination/bootstrap_input.js"></script>
      
    
  </body>
</html>